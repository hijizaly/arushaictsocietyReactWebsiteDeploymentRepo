import{r as i}from"./react.7518b171.js";import{u as R,P as T,L as k,a as B,b as z}from"./index.d2525657.js";import{g as E}from"./js-base64.9e801aaf.js";import"./crypto-js.dc365629.js";import{a as n,F as I,j as e,B as p,al as O,am as q,S as g,K as h,h as w,C as D,l as L}from"./@mui.b31b116c.js";import"./@babel.224e06a3.js";import"./react-dom.b5279d39.js";import"./scheduler.aed28d4c.js";import"./react-redux.b17300a9.js";import"./hoist-non-react-statics.7be3bd10.js";import"./react-is.6846a120.js";import"./use-sync-external-store.b4e9cc8d.js";import"./@reduxjs.bd935999.js";import"./reselect.bd965e1c.js";import"./immer.bcf67a53.js";import"./redux.8e64cde9.js";import"./redux-thunk.58761488.js";import"./react-cssfx-loading.e27ddca0.js";import"./goober.a82ec73e.js";import"./react-router.2885ab5b.js";import"./@remix-run.78edb8eb.js";import"./dayjs.3705364f.js";import"./react-router-dom.d098133f.js";import"./react-jwt.21fa11f6.js";import"./prop-types.c143d086.js";import"./@emotion.4e53e9a9.js";import"./stylis.1e89421e.js";import"./clsx.09c75e33.js";import"./react-transition-group.53e1b371.js";import"./dom-helpers.2a8a4335.js";import"./@date-io.9dc7b8a2.js";import"./rifm.61d0026b.js";import"./@popperjs.37f4ded5.js";const j=f=>{const[S,c]=R(),[o,l]=i.exports.useState(0);function P(){l(o+2)}function b(){l(o+1)}async function x(t){t.preventDefault();const s={secrete_code:a.code,payload:E.encode(a.newPassword)};try{const F=await S({urlId:B.pwdrsturlGet(),credentials:s}).unwrap().then(M=>{M.status,P(c.message)})}catch(F){console.log(F)}}const[a,C]=i.exports.useState({code:"",newPassword:""}),m=t=>{C(s=>({...s,[t.target.name]:t.target.value}))},u=(t,s)=>e(i.exports.Fragment,{children:e("div",{children:n(g,{direction:"column",spacing:2,px:4,children:[e("p",{m:"2",children:f.infoMessage}),e(h,{}),e("p",{m:"2",children:"Enter the Screat code from you Email"}),e(h,{}),e(g,{direction:"row",spacing:2,children:e(w,{label:"Screat code",size:"small",name:"code",value:t.code,onChange:s,inputProps:{maxLength:6},autoComplete:"off",required:!0})})]})})}),y=(t,s)=>e(i.exports.Fragment,{children:e("div",{children:e("form",{onSubmit:x,children:n(g,{direction:"column",spacing:3,my:3,children:[e(w,{label:"Password",size:"small",name:"newPassword",type:"password",value:t.newPassword,onChange:s,required:!0}),e(w,{label:"Re-type Password",size:"small",name:"newPassword",type:"password",value:t.newPassword,onChange:s,required:!0}),e(h,{}),e(p,{type:"submit",color:"success",variant:"outlined",disabled:!1,children:"Change Password"})]})})})}),v=t=>e(T,{snackToastOpener:!0,messageText:t}),r=()=>e(k,{sizeinPx:"80",message:"Please wait"});return n(I,{children:[(()=>{switch(o){case 0:return u(a,m);case 1:return y(a,m);case 2:return v("bla bla...");case 3:return r();default:return u(a,m)}})(),e("br",{}),o===0?n(p,{onClick:b,children:["Next",e(O,{sx:{ml:2}})]}):n(p,{onClick:()=>l(o-1),children:["Back",e(q,{sx:{ml:2}})]})]})},Se=f=>{const[S,c]=z(),[o,l]=i.exports.useState({openState:!1,toastMessages:""});function P(r){l({openState:!0,toastMessages:r})}function b(){setTimeout(()=>{f.closeHandle()},7e3)}const x=async r=>{var t;r.preventDefault();const d={email:a.email};try{await S(d).unwrap()}catch(s){console.log(s),P((t=s.data)==null?void 0:t.message)}},[a,C]=i.exports.useState({email:""}),m=r=>{C(d=>({...d,[r.target.name]:r.target.value}))},u=e(L,{children:e(p,{type:"submit",color:"success",variant:"contained",disabled:!1,children:"Reset Password"})}),[y,v]=i.exports.useState(u);return c.isLoading?e(k,{sizeinPx:"80",message:"Sending Email"}):c.isSuccess?(c.data.data!==null&&B.pwdrsturlSet(c.data.data.urlId),e(j,{infoMessage:c.data.message,autoClose:b})):n(i.exports.Fragment,{children:[e("div",{children:n("form",{onSubmit:x,children:[e(D,{children:"Enter your Email to reset account password"}),e(h,{}),n(g,{direction:"column",spacing:4,my:4,children:[e(w,{label:"Email",size:"small",name:"email",value:a.email,onChange:m,required:!0}),y]})]})}),e(T,{snackToastOpener:o.openState,messageText:o.toastMessages})]})};export{Se as default};
